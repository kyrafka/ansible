unix_groups: 
  - name: pcgamers
    state: present
  - name: servicios
    state: present

users:
  - name: gamer01
    state: present
    primary_group: pcgamers
    shell: /bin/bash
    
  - name: steam_epic_svc
    state: present
    shell: /usr/sbin/nologin
    groups: [pcgamers]
    primary_group: servicios
    home: /srv/steam_epic_svc
    create_home: true


filesystem_permissions:
  - path: /srv/steam_epic_svc        
    state: directory
    owner: steam_epic_svc
    group: pcgamers
    mode: "2770"                    
    recurse: false
game_servers_dir: /opt/game_servers

# Permisos en Windows para el grupo 'pcgamers'
windows_acl_rules:
  - path: 'C:\\Games'
    user_or_group: 'pcgamers'
    rights: Modify
    type: allow
    inherit: ContainerInherit, ObjectInherit
    propagation: None
    state: present
    ensure_path: true

cron_restart_service: game_updater.service
cron_time: "0 3 * * *"

# winrm
win_admin_user: "gamepc1"
win_admin_password: "{{ vault_win_admin_password }}"
enable_rdp: true

# Configuración de redes IPv6
networks:
  # Red 1 - Switch 1 (Servidor Ubuntu)
  - name: red1_servidor1
    ipv6_network: "2001:db8:1::/64"
    ipv6_gateway: "2001:db8:1::1"
    range_start: "2001:db8:1::10"     # Primera IP asignable
    range_end: "2001:db8:1::FFFF"    # Última IP del rango
    dns_servers: 
      - "2001:4860:4860::8888"      # Google DNS 1
      - "2001:4860:4860::8844"      # Google DNS 2
    domain_name: "red1.local"
    
  # Red 2 - Switch 1 (Clientes)
  - name: red2_switch1
    ipv6_network: "2001:db8:2::/64"
    ipv6_gateway: "2001:db8:2::1"
    range_start: "2001:db8:2::10"
    range_end: "2001:db8:2::FFFF"
    dns_servers: 
      - "2001:4860:4860::8888"
      - "2001:4860:4860::8844"
    domain_name: "red2.local"

  # Red 3 - Switch 2 (Servidor 2)
  - name: red3_servidor2
    ipv6_network: "2001:db8:3::/64"
    ipv6_gateway: "2001:db8:3::1"
    range_start: "2001:db8:3::10"
    range_end: "2001:db8:3::FFFF"
    dns_servers: 
      - "2001:4860:4860::8888"
      - "2001:4860:4860::8844"
    domain_name: "red3.local"

  # Red 4 - Switch 2 (Clientes)
  - name: red4_switch2
    ipv6_network: "2001:db8:4::/64"
    ipv6_gateway: "2001:db8:4::1"
    range_start: "2001:db8:4::10"
    range_end: "2001:db8:4::FFFF"
    dns_servers: 
      - "2001:4860:4860::8888"
      - "2001:4860:4860::8844"
    domain_name: "red4.local"

# Configuración del servidor DHCPv6
dhcp6_config:
  default_lease_time: 600
  max_lease_time: 7200
  domain_name_servers: "{{ networks[0].dns_servers | join(',') }}"
  domain_name: "{{ networks[0].domain_name }}"

# Configuración para bertvv.radvd role
radvd_interfaces:
  - device: ens34
    AdvSendAdvert: 'on'
    MinRtrAdvInterval: 30
    MaxRtrAdvInterval: 100
    AdvManagedFlag: 'on'
    AdvOtherConfigFlag: 'on'
    prefixes:
      - prefix: fd10:10::/64
        AdvOnLink: 'on'
        AdvAutonomous: 'on'
      - prefix: fd30:30::/64
        AdvOnLink: 'on'
        AdvAutonomous: 'on'

# Variables para debops.radvd (RA administrado + DHCPv6 stateful)
radvd__interfaces:
  - name: "ens34"
    options:
      - AdvSendAdvert: 'on'
      - MinRtrAdvInterval: 30
      - MaxRtrAdvInterval: 100
      - AdvManagedFlag: 'on'
      - AdvOtherConfigFlag: 'on'
    prefixes:
      - prefix: "fd10:10::/64"
        options:
          - AdvOnLink: 'on'
          - AdvAutonomous: 'off'
      - prefix: "fd30:30::/64"
        options:
          - AdvOnLink: 'on'
          - AdvAutonomous: 'off'

# Configuración VirtualBox (PC Local)
virtualbox:
  vm_name: "Win11-GamePC"
  os_type: "Windows11_64"
  memory: 4096

# Configuración VMware vSphere
# Nota: los valores reales se definen en archivos específicos por despliegue
# en  `group_vars/ubpc.yml` ps

servicios_necesarios:
  - ssh                  # Acceso remoto seguro por consola (SSH)
  - cron                 # Programador de tareas en segundo plano (CRONnnn)
  - NetworkManager       # Gestor de interfaces y configuración de red
  - isc-dhcp-server6     # Servidor DHCPv6: asigna direcciones IPv6 a clientes
  - radvd                # Prefijos y gateway IPv6
  - systemd-timesyncd    # Sincronización de hora del sistema (NTP ligero)
  - rsyslog              # Recolección y almacenamiento de logs del sistema

# almacenamiento/monitoreo
storage:
  disk_usage_warning: 80
  disk_usage_critical: 90
  inode_usage_warning: 85
  inode_usage_critical: 95
  watch_paths:
    - /var/log
    - /opt/game_servers
    - /tmp
    - /home
  journald_retention_days: 30
  syslog_retention_days: 14
  dhcp_log_retention_days: 7

# mantenimiento Windows programado
windows_maintenance:
  enable: true
  updates:
    day_of_week: Sunday
    time: '03:00'
  cleanup:
    day_of_week: Monday
    time: '04:00'
  antivirus:
    day_of_week: Wednesday
    time: '04:00'
  reboot:
    frequency: Daily
    time: '05:00'
