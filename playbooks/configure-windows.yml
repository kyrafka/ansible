---
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸªŸ PLAYBOOK PARA CONFIGURAR WINDOWS 11
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

- name: Configurar Windows 11
  hosts: windows
  gather_facts: no
  
  tasks:
    - name: Mostrar informaciÃ³n
      debug:
        msg:
          - "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
          - "Configurando Windows 11"
          - "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
    
    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    # CREAR USUARIOS
    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    - name: Crear usuario 'dev'
      ansible.windows.win_user:
        name: dev
        password: "123!123"
        state: present
        groups:
          - Users
        password_never_expires: yes
        user_cannot_change_password: no
      register: user_dev
    
    - name: Crear usuario 'cliente'
      ansible.windows.win_user:
        name: cliente
        password: "123!123"
        state: present
        groups:
          - Users
        password_never_expires: yes
        user_cannot_change_password: no
      register: user_cliente
    
    - name: Mostrar resultado de usuarios
      debug:
        msg:
          - "âœ… Usuario 'dev' creado: {{ user_dev.changed }}"
          - "âœ… Usuario 'cliente' creado: {{ user_cliente.changed }}"
    
    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    # CREAR CARPETAS COMPARTIDAS
    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    - name: Crear carpeta compartida
      ansible.windows.win_file:
        path: C:\Compartido
        state: directory
    
    - name: Crear carpeta para dev
      ansible.windows.win_file:
        path: C:\Dev
        state: directory
    
    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    # CONFIGURAR FIREWALL
    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    - name: Permitir ping (ICMPv6)
      ansible.windows.win_shell: |
        New-NetFirewallRule -Name "ICMPv6-In" -DisplayName "ICMPv6 Ping" -Protocol ICMPv6 -IcmpType 8 -Enabled True -Direction Inbound -Action Allow -ErrorAction SilentlyContinue
    
    - name: Permitir compartir archivos (SMB)
      ansible.windows.win_shell: |
        Enable-NetFirewallRule -DisplayGroup "File and Printer Sharing"
    
    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    # INFORMACIÃ“N DEL SISTEMA
    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    - name: Obtener informaciÃ³n del sistema
      ansible.windows.win_shell: |
        $info = @{
          Hostname = $env:COMPUTERNAME
          OS = (Get-WmiObject Win32_OperatingSystem).Caption
          Users = (Get-LocalUser | Select-Object -ExpandProperty Name) -join ', '
        }
        $info | ConvertTo-Json
      register: system_info
    
    - name: Mostrar informaciÃ³n del sistema
      debug:
        msg: "{{ system_info.stdout | from_json }}"
    
    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    # RESUMEN
    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    - name: Resumen de configuraciÃ³n
      debug:
        msg:
          - "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
          - "âœ… CONFIGURACIÃ“N COMPLETADA"
          - "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
          - ""
          - "ğŸ‘¥ Usuarios creados:"
          - "  - dev (contraseÃ±a: 123!123)"
          - "  - cliente (contraseÃ±a: 123!123)"
          - ""
          - "ğŸ“ Carpetas creadas:"
          - "  - C:\\Compartido"
          - "  - C:\\Dev"
          - ""
          - "ğŸ”¥ Firewall configurado:"
          - "  - Ping (ICMPv6) permitido"
          - "  - Compartir archivos habilitado"
          - ""
          - "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
