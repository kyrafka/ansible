---
# Configuración específica para usuario ADMIN

- name: Permisos de escritura en games e instaladores para admin
  ansible.builtin.file:
    path: "{{ item }}"
    owner: root
    group: pcgamers
    mode: '0775'
  loop:
    - /srv/games
    - /srv/instaladores
  become: true

- name: Permitir SSH saliente para administrador
  ansible.builtin.lineinfile:
    path: /etc/security/access.conf
    line: "+:administrador:ALL"
    create: yes
  become: true

- name: Configurar sudoers para administrador (acceso total)
  ansible.builtin.lineinfile:
    path: /etc/sudoers.d/administrador
    line: "administrador ALL=(ALL) NOPASSWD: ALL"
    create: true
    mode: '0440'
    validate: 'visudo -cf %s'
  become: true

- name: Mensaje de configuración administrador
  ansible.builtin.debug:
    msg:
      - "✅ Usuario ADMINISTRADOR configurado"
      - "  - Acceso total con sudo"
      - "  - Puede SSH al servidor"
      - "  - Escritura en /srv/games y /srv/instaladores"
